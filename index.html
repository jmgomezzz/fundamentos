<!DOCTYPE html>
<!-- Autores: Irene Mendoza Mederos y José Manuel Gómez Ruiz-->
<head>
    <title> LA FÁBRICA DE PIEZAS por Irene Mendoza Mederos y José Manuel Gómez Ruiz</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./CSS.css">
</head>
<body>
    <h1>LA FÁBRICA DE PIEZAS por Irene Mendoza Mederos y José Manuel Gómez Ruiz</h1>
<p>Pulsa para ejecutar la simulación:</p>
<button id="run-100">Simular 100 turnos</button>
<button id="run-1000">Simular 1000 turnos</button>
<form>  
<label for = "turnos">O introduce el número de turnos a simular:</label>
<input id="turnos" type="number" id="turnos" name="turnos">
</form>
<button id="run-custom">Simular turnos personalizados</button>
<img src="https://cdn.pixabay.com/photo/2021/05/03/13/24/sunset-6226244_1280.jpg" alt="Fábrica" width="300" >
<h2>Resultados</h2>
<pre id="output">Aquí aparecerán los resultados de la simulación:</pre>

<!-- Cargamos el script con las clases Factoria y Estación-->
<script src="./JavaScript.js"></script>

<script>
//Función para ejecutar la simulación, esta simulación no es acumulativa y solo nos simulará el número de turnos indicados y luego se reiniciará.
//El resto de la lógica está en el archivo JavaScript.js
function Fabricar(turnos){
    //Creamos las instancias de la factoría y la estación de tratamiento
    const factoria = new Factoria();
    const estacion = new EstacionTratamiento();

    for (let i=0; i<turnos; i++){
        const pieza = factoria.generarPieza(); //Genera una pieza
        estacion.procesarPieza(pieza); //La procesa
    }

    //Obtenemos contadores
    const tratamientos = estacion.devolverContadores();
    const total= factoria.Total ?? (factoria.TotalElectricas + factoria.TotalMecanicas);
    const electricas = factoria.TotalElectricas;
    const mecanicas = factoria.TotalMecanicas;

    //Mostramos resultados
    const out = [
        `Turnos: ${turnos}`,
        `Piezas totales: ${total}`,
        `  Eléctricas: ${electricas}`,
        `  Mecánicas: ${mecanicas}`,
        ``,
        `De las eléctricas:`,
        `  Barnizada normal: ${tratamientos.barnizNormal}`,
        `  Barnizada especial: ${tratamientos.barnizEspecial}`,
        ``,
        `De las mecánicas:`,
        `  Galvanizadas: ${tratamientos.galvanizado}`,
        `  Pintadas: ${tratamientos.pintado}`,
        `  Pulidas: ${tratamientos.pulido}`
      ].join('\n');
    document.getElementById("output").textContent = out;
}

    //Eventos listener para los botones
    document.getElementById("run-100").addEventListener("click", () => Fabricar(100));
    document.getElementById("run-1000").addEventListener("click", () => Fabricar(1000));
    document.getElementById("run-custom").addEventListener("click", () => {
        const turnosInput = document.getElementById("turnos").value;
        const turnos = parseInt(turnosInput, 10);
        if (turnos > 0) {
            Fabricar(turnos);
        } else {
            alert("Por favor, introduce un número válido de turnos.");
        }

    });
    
</script>
</body>
</html>